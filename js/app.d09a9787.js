(function(){"use strict";var t={7906:function(t,e,s){var a=s(6369),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"bg-success bg-gradient sticky-top p-2 d-flex justify-content-between align-items-center justify-content-lg-around mb-3"},[e("h5",{staticClass:"sitename mx-2 fw-bolder"},[t._v(t._s(t.sitename))]),e("div",{staticClass:"checkoutBox"},[t.cartCount()>0||!t.showLesson?e("button",{staticClass:"btn-warning btn bg-gradient position-relative mx-2",attrs:{type:"button"},on:{click:t.switchPage}},[e("i",{staticClass:"bi bi-cart-check-fill me-1"}),t._v(t._s(t.showLesson?"Checkout":"Activities")+" "),t.showLesson?e("span",{staticClass:"badge bg-danger position-absolute top-0 start-100 translate-middle round-pill"},[t._v(t._s(t.cartCount()))]):t._e()]):t._e()])]),t.showLesson?e("lessons-component",{attrs:{lessons:t.lessons,cart:t.cart},on:{addToCart:t.addToCart,handle_lessons:t.handle_lessons}}):e("checkout-component",{attrs:{cart:t.cart,checkMsg:t.checkMsg,lessons:t.lessons},on:{removeFromCart:t.removeFromCart,submitOrder:t.submitOrder}}),e("div",{staticClass:"position-fixed bottom-0 start-0 p-3",staticStyle:{"z-index":"11"}},[e("div",{ref:"toast",staticClass:"toast hide",attrs:{id:"liveToast",role:"alert","aria-live":"assertive","aria-atomic":"true"}},[e("div",{staticClass:"toast-header"},[e("i",{class:t.notifyMsg.classAttr}),e("strong",{staticClass:"me-auto"},[t._v(t._s(t.notifyMsg.header))]),e("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"toast","aria-label":"Close"}})]),e("div",{staticClass:"toast-body"},[e("p",[e("strong",[t._v("Subject: ")]),t._v(t._s(t.notifyMsg.subject))]),e("p",[e("strong",[t._v("Location: ")]),t._v(t._s(t.notifyMsg.location))]),e("p",[e("strong",[t._v("Price: ")]),t._v("AED"+t._s(t.notifyMsg.price)+".00")]),e("p",[e("strong",[t._v("Spaces: ")]),t._v(t._s(t.notifyMsg.space))])])])]),t._m(0),t._m(1)],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"position-relative"},[e("div",{staticClass:"circle1"}),e("div",{staticClass:"circle2"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"shapes"},[e("div",{staticClass:"shape1"}),e("div",{staticClass:"shape2"})])}],o=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"container p-4 bg-light controlBox d-flex flex-column flex-lg-row justify-content-around align-items-center"},[e("div",{staticClass:"searchBox d-flex flex-column flex-sm-grow-1"},[e("h6",{staticClass:"mb-2"},[t._v("Search:")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],attrs:{id:"searchBox",type:"text",placeholder:"Enter Search Term"},domProps:{value:t.searchTerm},on:{input:[function(e){e.target.composing||(t.searchTerm=e.target.value)},()=>t.handle_lessons()]}})]),e("div",{staticClass:"toolBox container"},[e("div",{staticClass:"sortBox d-flex flex-column m-3 p-2 justify-content-between"},[e("h6",{staticClass:"mb-2"},[t._v("Sort:")]),e("div",{staticClass:"btn-group btn-group-sm",attrs:{role:"group"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.sortAttr,expression:"sortAttr"}],staticClass:"btn-check",attrs:{type:"radio",name:"attribute",id:"subject",autocomplete:"off",value:"subject",checked:""},domProps:{checked:t._q(t.sortAttr,"subject")},on:{change:function(e){t.sortAttr="subject"}}}),e("label",{staticClass:"btn btn-outline-success",attrs:{for:"subject"}},[t._v("Subject")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.sortAttr,expression:"sortAttr"}],staticClass:"btn-check",attrs:{name:"attribute",type:"radio",id:"location",autocomplete:"off",value:"location"},domProps:{checked:t._q(t.sortAttr,"location")},on:{change:function(e){t.sortAttr="location"}}}),e("label",{staticClass:"btn btn-outline-success",attrs:{for:"location"}},[t._v("Location")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.sortAttr,expression:"sortAttr"}],staticClass:"btn-check",attrs:{name:"attribute",type:"radio",id:"price",value:"price",autocomplete:"off"},domProps:{checked:t._q(t.sortAttr,"price")},on:{change:function(e){t.sortAttr="price"}}}),e("label",{staticClass:"btn btn-outline-success",attrs:{for:"price"}},[t._v("Price")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.sortAttr,expression:"sortAttr"}],staticClass:"btn-check",attrs:{name:"attribute",type:"radio",id:"available",value:"availableSpace",autocomplete:"off"},domProps:{checked:t._q(t.sortAttr,"availableSpace")},on:{change:function(e){t.sortAttr="availableSpace"}}}),e("label",{staticClass:"btn btn-outline-success",attrs:{for:"available"}},[t._v("Availablity")])]),e("div",{staticClass:"mt-3 btn-group btn-group-sm",attrs:{role:"group"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.order,expression:"order"}],staticClass:"btn-check",attrs:{type:"radio",id:"ascending",autocomplete:"off",value:"ascending",name:"order",checked:""},domProps:{checked:t._q(t.order,"ascending")},on:{change:function(e){t.order="ascending"}}}),t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.order,expression:"order"}],staticClass:"btn-check",attrs:{type:"radio",id:"descending",value:"descending",autocomplete:"off",name:"order"},domProps:{checked:t._q(t.order,"descending")},on:{change:function(e){t.order="descending"}}}),t._m(1)])])])]),e("div",{staticClass:"resultBox container d-flex justify-content-around align-items-center flex-wrap"},t._l(t.sortedLessons,(function(s){return e("div",{key:s.id,staticClass:"d-flex m-2 lesson p-3"},[e("div",{staticClass:"d-flex justify-content-center align-items-center"},[e("div",{staticClass:"me-2"},[e("figure",[e("img",{staticClass:"lessonImage",attrs:{src:t.server_url+s.image}})])]),e("div",{staticClass:"ms-1 h-90"},[e("p",[e("strong",[t._v("Subject: ")]),t._v(t._s(s.subject))]),e("p",[e("strong",[t._v("Location: ")]),t._v(t._s(s.location))]),e("p",[e("strong",[t._v("Price: ")]),t._v("AED "+t._s(s.price)+".00")]),e("p",[e("strong",[t._v("Spaces: ")]),t._v(t._s(s.availableSpace))]),t.canAddToCart(s)?e("button",{staticClass:"btn btn-success btn-sm bg-gradient",on:{click:function(e){return t.addToCart(s)}}},[e("i",{staticClass:"bi bi-plus-lg me-1"}),t._v(" Add To cart ")]):e("button",{staticClass:"btn btn-success btn-sm",attrs:{type:"button",disabled:""}},[e("i",{staticClass:"bi bi-exclamation-circle-fill me-1"}),t._v(" Add To Cart ")])])])])})),0)])},n=[function(){var t=this,e=t._self._c;return e("label",{staticClass:"btn-outline-success btn",attrs:{for:"ascending"}},[e("i",{staticClass:"bi bi-arrow-up me-1"}),t._v("Ascending")])},function(){var t=this,e=t._self._c;return e("label",{staticClass:"btn-outline-success btn",attrs:{for:"descending"}},[e("i",{staticClass:"bi bi-arrow-down me-1"}),t._v("Descending")])}],c={name:"LessonsComponent",props:["lessons","cart"],data(){return{searchTerm:"",sortAttr:"subject",order:"ascending",server_url:"http://localhost:3000/"}},methods:{handle_lessons(){this.$emit("handle_lessons",this.searchTerm)},canAddToCart(t){return 0!==t.availableSpace&&(void 0===this.cart[t.id]||t.availableSpace>0)},addToCart(t){this.$emit("addToCart",t)}},computed:{sortedLessons(){let t=this.lessons.slice(0);const e=t=>typeof t===String?t.toLowerCase():t,s=(t,s)=>e(t[this.sortAttr])<e(s[this.sortAttr])?-1:e(t[this.sortAttr])<e(s[this.sortAttr])?0:void 0;return"descending"===this.order?t.sort(s).reverse():t.sort(s)}}},l=c,d=s(1001),u=(0,d.Z)(l,o,n,!1,null,null,null),h=u.exports,m=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"bg-light p-3 m-2 mx-lg-5 px-lg-5 mb-4 sticky-top"},[e("h4",{staticClass:"m-2 text-success fw-bolder text-uppercase"},[t._v("Check Out:")]),t._m(0),e("div",{staticClass:"input-group text_input mb-3 d-flex flex-sm-row flex-column justify-content-md-around justify-content-center align-items-center"},[e("div",{staticClass:"mx-2 p-1 flex-sm-grow-1"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.name,expression:"orderData.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter Full Name Here"},domProps:{value:t.orderData.name},on:{input:function(e){e.target.composing||t.$set(t.orderData,"name",e.target.value)}}})]),e("div",{staticClass:"mx-2 p-1 flex-sm-grow-1"},[t._m(2),e("input",{directives:[{name:"model",rawName:"v-model",value:t.orderData.phoneNumber,expression:"orderData.phoneNumber"}],staticClass:"form-control",attrs:{placeholder:"Enter Phone Number Here.","aria-label":"phone number"},domProps:{value:t.orderData.phoneNumber},on:{input:function(e){e.target.composing||t.$set(t.orderData,"phoneNumber",e.target.value)}}})]),e("div",{staticClass:"mx-2 p-1"},[t.isValid()?e("button",{staticClass:"btn-success btn btn-sm bg-gradient",attrs:{type:"button"},on:{click:t.submitOrder}},[e("i",{staticClass:"bi me-1 bi-check-circle-fill"}),t._v(" "+t._s(t.checkMsg)+" ")]):e("button",{staticClass:"btn-warning btn btn-sm",attrs:{type:"button",disabled:""}},[e("i",{staticClass:"bi me-1 bi-exclamation-circle-fill"})])])])]),e("h4",{staticClass:"text-center fw-bolder text-uppercase pt-2 text-success"},[t._v(" Cart List ")]),Object.keys(t.cart).length<=0?e("div",{staticClass:"empty_box d-flex flex-column justify-content-around align-items-center p-4"},[e("i",{staticClass:"bi mx-auto my-auto cart_image bi-cart-x-fill text-success"}),e("p",{staticClass:"text-success h4"},[t._v("Empty!!")])]):t._e(),e("div",{staticClass:"resultBox container d-flex justify-content-around align-items-center flex-wrap"},t._l(t.getCartLessons,(function(s){return e("div",{key:s._id,staticClass:"d-flex m-2 lesson p-3"},[e("div",{staticClass:"d-flex justify-content-center align-items-center"},[e("div",{staticClass:"me-2"},[e("figure",[e("img",{staticClass:"lessonImage",attrs:{src:t.server_url+s.image}})])]),e("div",{staticClass:"ms-1 h-90"},[e("p",[e("strong",[t._v("Subject: ")]),t._v(t._s(s.subject))]),e("p",[e("strong",[t._v("Location: ")]),t._v(t._s(s.location))]),e("p",[e("strong",[t._v("Price: ")]),t._v("AED "+t._s(s.price)+".00")]),e("p",[e("strong",[t._v("Spaces: ")]),t._v(t._s(s.space))]),e("button",{staticClass:"btn btn-success btn-sm",on:{click:function(e){return t.removeFromCart(s)}}},[e("i",{staticClass:"bi bi-trash3-fill me-1"}),t._v(" Remove ")])])])])})),0)])},p=[function(){var t=this,e=t._self._c;return e("ul",{staticClass:"mb-3 text-success fs-6 fw-lighter"},[e("li",[e("small",[t._v("Full Name field accepts only letters.")])]),e("li",[e("small",[t._v("Phone number field accepts only numbers.")])])])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"input-group-text bg-warning text-light",attrs:{id:"name"}},[e("i",{staticClass:"bi me-1 bi-person-fill"}),t._v("Full Name: ")])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"input-group-text bg-warning text-light"},[e("i",{staticClass:"bi me-2 bi-telephone-fill"}),t._v("Phone Number: ")])}],f=(s(7658),{name:"CheckoutComponent",props:["cart","checkMsg","lessons"],data(){return{server_url:"http://localhost:3000/",cartArray:[],orderData:{name:"",phoneNumber:""}}},computed:{getCartLessons(){const t=()=>this.cartArray=[];t();const e=t=>{let e,s={id:t};e=this.lessons.find((e=>e.id==t)),s.subject=e.subject,s.location=e.location,s.price=e.price,s.image=e.image,s.space=this.cart[t],this.cartArray.push(s)};return Object.keys(this.cart).forEach(e),this.cartArray}},methods:{removeFromCart(t){this.cartArray.forEach(((e,s)=>{e.id===t.id&&this.cartArray.splice(s,1)})),this.$emit("removeFromCart",t)},isValid(){return""!==this.orderData.phoneNumber&&""!==this.orderData.name&&(!(this.orderData.phoneNumber.search(/[a-z]/gi)>-1||this.orderData.name.search(/[0-9]/g)>-1)&&!(this.cartArray.length<1))},submitOrder(){this.$emit("submitOrder",this.orderData)}}}),b=f,v=(0,d.Z)(b,m,p,!1,null,null,null),g=v.exports,_=s(2166);let C="http://localhost:3000/collection/lessons",y="http://localhost:3000/collection/orders";var x={name:"App",components:{lessonsComponent:h,checkoutComponent:g},data(){return{sitename:"After School Activities",lessons:[],cart:{},checkMsg:"Checkout",notifyMsg:{header:"",type:"",classAttr:"",subject:"",location:"",price:"",space:""},showLesson:!0}},methods:{addToCart(t){Object.keys(this.cart).includes(String(t.id))?this.cart[t.id]++:this.cart[t.id]=1,t.availableSpace--,this.handleNotify(t,1)},removeFromCart(t){this.lessons.forEach((e=>{e.id==t.id&&(e.availableSpace=5,delete this.cart[e.id],this.handleNotify(e,2))}))},submitOrder(t){let e={...t},s={},a={};const r=t=>{let e=this.lessons.find((e=>e.id==t));a[e._id]=this.cart[t],s[e._id]=e.availableSpace-this.cart[t]};Object.keys(this.cart).forEach(r),e["order"]=a;const i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=t=>{let e=C+"/"+t,a={availableSpace:s[t]};const r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};fetch(e,r).then((t=>t.json())).then((e=>{"success"===!e.msg&&console.log("An Error occured!, "+t)}))};fetch(y,i).then((t=>t.json())).then((t=>{"success"===t.msg?(this.checkMsg="Order Submitted!!",this.handleNotify({},3),Object.keys(s).forEach(o),setTimeout((()=>this.cart={}),1500)):this.checkMsg="An Error occured!"}))},handleNotify(t,e){let s="rounded me-2 bi bi-bell-fill text-";switch(e){case 1:s+="success",this.notifyMsg.header="Added To Cart!",this.notifyMsg.type=1;break;case 2:s+="danger",this.notifyMsg.header="Removed From Cart!",this.notifyMsg.type=2;break;case 3:s+="success",this.notifyMsg.header="Order Submitted!",this.notifyMsg.type=1;break}this.notifyMsg.classAttr=s,3===e?(this.notifyMsg.subject="Total Order",this.notifyMsg.location="Total Order",this.notifyMsg.price=0,this.notifyMsg.space="Total Order"):(this.notifyMsg.subject=t.subject,this.notifyMsg.location=t.location,this.notifyMsg.price=t.price,this.notifyMsg.space=this.cart[t.id]||t.availableSpace);let a=_.FN.getOrCreateInstance(this.$refs.toast);a._config.delay=3e3,a.show()},switchPage(){fetch(C).then((t=>t.json())).then((t=>{this.lessons=t})),this.showLesson=!this.showLesson},cartCount(){return Object.keys(this.cart).length},handle_lessons(t){if(t){let e=C+"/"+t;fetch(e).then((t=>t.json())).then((t=>{this.lessons=t})).catch((t=>{console.error(t)}))}else fetch(C).then((t=>t.json())).then((t=>{this.lessons=t}))}},created(){fetch(C).then((t=>t.json())).then((t=>{this.lessons=t})).catch((t=>{console.log("issue with created function: check server is running",t)}))}},k=x,j=(0,d.Z)(k,r,i,!1,null,null,null),w=j.exports;a.ZP.config.productionTip=!1,new a.ZP({render:t=>t(w)}).$mount("#app")}},e={};function s(a){var r=e[a];if(void 0!==r)return r.exports;var i=e[a]={exports:{}};return t[a].call(i.exports,i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,a,r,i){if(!a){var o=1/0;for(d=0;d<t.length;d++){a=t[d][0],r=t[d][1],i=t[d][2];for(var n=!0,c=0;c<a.length;c++)(!1&i||o>=i)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(n=!1,i<o&&(o=i));if(n){t.splice(d--,1);var l=r();void 0!==l&&(e=l)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[a,r,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var r,i,o=a[0],n=a[1],c=a[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(r in n)s.o(n,r)&&(s.m[r]=n[r]);if(c)var d=c(s)}for(e&&e(a);l<o.length;l++)i=o[l],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(d)},a=self["webpackChunkIndividualCourseWork3"]=self["webpackChunkIndividualCourseWork3"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(7906)}));a=s.O(a)})();
//# sourceMappingURL=app.d09a9787.js.map